package org.springframework.security.bcrypt;

import org.springframework.boot.CommandLineRunner;
import org.springframework.security.bcrypt.check.CheckCommand;
import org.springframework.security.bcrypt.update.UpdateCommand;

public class Commands implements CommandLineRunner {

	private final CheckCommand check;

	private final UpdateCommand update;

	public Commands(CheckCommand check, UpdateCommand update) {
		this.check = check;
		this.update = update;
	}

	@Override
	public void run(String... args) {
		String command = determineCommand(args);
		if ("check".equals(command)) {
			this.check.run();
		} else if ("update".equals(command)) {
			this.update.run();
		} else {
			System.err.println("Unrecognized command");
		}
	}

	private String determineCommand(String[] args) {
		if (args.length == 0) {
			return "check";
		}
		return args[0];
	}
}
